services:
  schema-api:
    build: .
    labels:
      - traefik.enable=true
      - traefik.http.routers.schema-api.rule=Host(`schema.strudel.marketing`)
      - traefik.http.routers.schema-api.entrypoints=https
      - traefik.http.routers.schema-api.tls=true
      - traefik.http.routers.schema-api.tls.certresolver=letsencrypt
      - traefik.http.services.schema-api.loadbalancer.server.port=3015
      - traefik.http.routers.schema-api.middlewares=gzip
      - traefik.http.middlewares.gzip.compress=true
    networks:
      - traefik
    command: python app.py

networks:
  traefik:
    external: true
